{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/nbz13/Desktop/gk-backend/azure-deploy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/nbz13/Desktop/gk-backend/azure-deploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/nbz13/Desktop/gk-backend/azure-deploy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';// import { Link } from 'react-router-dom';\nimport Booking from'./Booking';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function AvailableRooms(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedRoom=_useState4[0],setSelectedRoom=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showModal=_useState6[0],setShowModal=_useState6[1];useEffect(function(){fetchRooms();},[]);var fetchRooms=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(process.env.REACT_APP_API_ADDRESS+\"/api/room/getAllRooms\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);setRooms(data);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error('Error fetching hotels:',_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchRooms(){return _ref.apply(this,arguments);};}();var handleBookClick=function handleBookClick(room){setSelectedRoom(room);setShowModal(true);// console.log(\"Modal should be displayed now.\");\n};var handleConfirmBooking=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(bookingDetails){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log('Booking Details:',bookingDetails);setShowModal(false);fetchRooms();case 3:case\"end\":return _context2.stop();}},_callee2);}));return function handleConfirmBooking(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-warning mt-3\",children:\"All Available Rooms\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:rooms.map(function(room){return/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3\",style:{boxShadow:\"1px 1px 5px #ffc107\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"https://imgcld.yatra.com/ytimages/image/upload/t_seo_Hotel_w_930_h_550_c_fill_g_auto_q_40_f_jpg/v1390494345/Domestic%20Hotels/Hotels_Mysore/Hotel%20The%20President/Facade~904.jpg\",alt:\"\",className:\"img-fluid\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-5\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[room.roomType.toUpperCase(),\" ROOM\"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Hotel Name: \",room.hotel.name]}),/*#__PURE__*/_jsx(\"h6\",{children:room.description}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Room Number: \",room.roomNumber]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Location: \",room.hotel.address]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Availability: \",room.availability.toString()]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Price: Rs. \",room.pricing,\"/Night\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-3 justify-content-center align-items-center d-flex mb-5\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleBookClick(room);},className:\"btn btn-warning \".concat(!room.availability&&'disabled'),children:\"Book\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-2\"})]},room._id);})}),showModal&&selectedRoom&&/*#__PURE__*/_jsx(Booking,{hotelId:selectedRoom.hotel._id,hotelName:selectedRoom.hotel.name,roomNumber:selectedRoom.roomNumber,roomPrice:selectedRoom.pricing||0// Use a default value (0) if pricing is undefined\n,roomId:selectedRoom._id,onConfirmBooking:handleConfirmBooking,showModal:showModal,setShowModal:setShowModal,showAlert:props.showAlert})]});};export default AvailableRooms;","map":{"version":3,"names":["React","useState","useEffect","Booking","jsx","_jsx","jsxs","_jsxs","AvailableRooms","props","_useState","_useState2","_slicedToArray","rooms","setRooms","_useState3","_useState4","selectedRoom","setSelectedRoom","_useState5","_useState6","showModal","setShowModal","fetchRooms","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","process","env","REACT_APP_API_ADDRESS","sent","json","console","log","t0","error","stop","apply","arguments","handleBookClick","room","handleConfirmBooking","_ref2","_callee2","bookingDetails","_callee2$","_context2","_x","children","className","map","style","boxShadow","src","alt","roomType","toUpperCase","hotel","name","description","roomNumber","address","availability","toString","pricing","onClick","concat","_id","hotelId","hotelName","roomPrice","roomId","onConfirmBooking","showAlert"],"sources":["C:/Users/nbz13/Desktop/gk-backend/azure-deploy/frontend/src/components/AvailableRooms.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// import { Link } from 'react-router-dom';\r\nimport Booking from './Booking';\r\n\r\nexport function AvailableRooms(props) {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [selectedRoom, setSelectedRoom] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchRooms();\r\n  }, []);\r\n\r\n  const fetchRooms = async () => {\r\n    try {\r\n      const response = await fetch(process.env.REACT_APP_API_ADDRESS + \"/api/room/getAllRooms\");\r\n      const data = await response.json();\r\n      console.log(data);\r\n      setRooms(data);\r\n    } catch (error) {\r\n      console.error('Error fetching hotels:', error);\r\n    }\r\n  };\r\n\r\n  const handleBookClick = (room) => {\r\n    setSelectedRoom(room);\r\n    setShowModal(true);\r\n    // console.log(\"Modal should be displayed now.\");\r\n  };\r\n\r\n  const handleConfirmBooking = async (bookingDetails) => {\r\n    console.log('Booking Details:', bookingDetails);\r\n    setShowModal(false);\r\n    fetchRooms();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"text-center text-warning mt-3\">All Available Rooms</h1>\r\n      <div className=\"container mt-5\">\r\n        {rooms.map((room) => (\r\n          <div key={room._id} className=\"row justify-content-start\">\r\n            <div className=\"col-lg-3\" style={{ boxShadow: \"1px 1px 5px #ffc107\" }}>\r\n              <img src=\"https://imgcld.yatra.com/ytimages/image/upload/t_seo_Hotel_w_930_h_550_c_fill_g_auto_q_40_f_jpg/v1390494345/Domestic%20Hotels/Hotels_Mysore/Hotel%20The%20President/Facade~904.jpg\" alt=\"\" className=\"img-fluid\" />\r\n            </div>\r\n            <div className=\"col-lg-5\">\r\n              <h3>{room.roomType.toUpperCase()} ROOM</h3>\r\n              <h5>Hotel Name: {room.hotel.name}</h5>\r\n              <h6>{room.description}</h6>\r\n              <h6>Room Number: {room.roomNumber}</h6>\r\n              <h6>Location: {room.hotel.address}</h6>\r\n              <h6>Availability: {room.availability.toString()}</h6>\r\n              <h6>Price: Rs. {room.pricing}/Night</h6>\r\n            </div>\r\n            <div className=\"col-lg-3 justify-content-center align-items-center d-flex mb-5\">\r\n              <button\r\n                onClick={() => handleBookClick(room)}\r\n                className={`btn btn-warning ${!room.availability && 'disabled'}`}\r\n              >\r\n                Book\r\n              </button>\r\n            </div>\r\n            <hr className='mt-2' />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Render the booking form if showModal is true */}\r\n      {showModal && selectedRoom && (\r\n        <Booking\r\n          hotelId={selectedRoom.hotel._id}\r\n          hotelName={selectedRoom.hotel.name}\r\n          roomNumber={selectedRoom.roomNumber}\r\n          roomPrice={selectedRoom.pricing || 0} // Use a default value (0) if pricing is undefined\r\n          roomId={selectedRoom._id}\r\n          onConfirmBooking={handleConfirmBooking}\r\n          showModal={showModal}\r\n          setShowModal={setShowModal}\r\n          showAlert={props.showAlert}\r\n        />\r\n\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AvailableRooms;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}